---
alwaysApply: false
description: Zionä»£ç ç»„ä»¶15æ­¥å¼€å‘æ‰§è¡Œæµç¨‹ï¼ŒåŒ…å«ç¯å¢ƒé…ç½®ã€é¡¹ç›®ç®¡ç†ã€ä»£ç å®ç°å’Œå‘å¸ƒéƒ¨ç½²
---

# Zion ä»£ç ç»„ä»¶å¼€å‘æ‰§è¡Œæµç¨‹

## ğŸ¯ æµç¨‹ç›®æ ‡

è‡ªåŠ¨åŒ–å®Œæˆä»ç¯å¢ƒéªŒè¯åˆ°å‘å¸ƒä¸Šçº¿çš„å®Œæ•´å¼€å‘æµç¨‹ï¼Œç¡®ä¿ç»„ä»¶ç¬¦åˆZionå¹³å°è§„èŒƒã€‚

## ğŸ›¡ï¸ æ ¸å¿ƒçº¦æŸ

### ç›®å½•å”¯ä¸€æ€§åŸåˆ™
- æ‰€æœ‰å¼€å‘æ´»åŠ¨å¿…é¡»åœ¨Zioné¡¹ç›®ç›®å½•å†…è¿›è¡Œ
- ç¦æ­¢è·¨ç›®å½•ã€è·¨é¡¹ç›®æ“ä½œ
- ä¸èƒ½æ“…è‡ªæ·»åŠ æ¨¡æ‹Ÿæ•°æ®æˆ–ç²¾ç®€åŠŸèƒ½

## ğŸ”§ 15æ­¥æ ‡å‡†æ‰§è¡Œæµç¨‹

### Step 1: ç¯å¢ƒéªŒè¯ä¸ç™»å½•æµç¨‹

**ç›®æ ‡**: éªŒè¯å¼€å‘ç¯å¢ƒå¹¶ç¡®ä¿ç™»å½•çŠ¶æ€

**å…³é”®åŠ¨ä½œ**:
- ç³»ç»Ÿç¯å¢ƒæ£€æµ‹ï¼ˆWindows/macOSï¼‰
- Node.js åŠ npm éªŒè¯ä¸å®‰è£…ï¼ˆv20.19.4ï¼‰
- Functorz CLI éªŒè¯ä¸å®‰è£…
- tsx éªŒè¯ä¸å®‰è£…
- functorz ç™»å½•éªŒè¯

**æ ¸å¿ƒä»£ç **:
```typescript
// ç³»ç»Ÿæ£€æµ‹
const platform = os.platform();
const isWindows = platform === 'win32';
const isMac = platform === 'darwin';

// Node.jséªŒè¯
const nodeVersion = await execCommand('node --version');
if (!nodeVersion.includes('v20.19.4')) {
  await installNode();
}

// è®¾ç½®npmé•œåƒ
await execCommand('npm config set registry https://registry.npmmirror.com/');

// éªŒè¯tsxï¼ˆå…ˆéªŒè¯ï¼Œæœªå®‰è£…å†å®‰è£…ï¼‰
  try {
    await execCommand('npx tsx --version');
    console.log(' tsxå·²å®‰è£…');
  } catch (error) {
    console.log(' tsxæœªå®‰è£…ï¼Œå¼€å§‹å®‰è£…...');
    await execCommand('npm i -g tsx');
    console.log(' tsxå®‰è£…å®Œæˆ')

// éªŒè¯functorz CLIï¼ˆå…ˆéªŒè¯ï¼Œæœªå®‰è£…å†å®‰è£…ï¼‰
  try {
    await execCommand('npx functorz -h');
    console.log(' Functorz CLIå·²å®‰è£…');
  } catch (error) {
    console.log(' Functorz CLIæœªå®‰è£…ï¼Œå¼€å§‹å®‰è£…...');
    await execCommand('npm i -g functorz');
    console.log(' Functorz CLIå®‰è£…å®Œæˆ');
  }

// ç™»å½•éªŒè¯
await execCommand(`npx functorz signin ${email} ${password}`);
```

### Step 2: é¡¹ç›®çŠ¶æ€æ£€æŸ¥ä¸åˆå§‹åŒ–æµç¨‹

**ç›®æ ‡**: æ™ºèƒ½æ£€æµ‹é¡¹ç›®çŠ¶æ€ï¼Œå†³å®šæ˜¯å¦åˆ›å»ºæ–°é¡¹ç›®

**å…³é”®åŠ¨ä½œ**:
- æ£€æŸ¥å½“å‰ç›®å½•æ˜¯å¦æœ‰æ•ˆZioné¡¹ç›®
- å¿…é¡»è¦è¯¢é—®ç”¨æˆ·æ„æ„¿æ˜¯å¦æ˜¯æ–°å»ºé¡¹ç›®åˆ›å»ºç»„ä»¶è¿˜æ˜¯åœ¨å½“å‰çš„é¡¹ç›®å†…åˆ›å»ºç»„ä»¶ï¼ˆæ£€æµ‹å½“å‰ç›®å‰ä¸ºæœ‰æ•ˆzion é¡¹ç›®æ—¶ï¼‰
- è‹¥ä¸å­˜åœ¨æœ‰æ•ˆ zion é¡¹ç›®ç›®å½•ï¼Œåˆ™ç›´æ¥æ–°å»º
- æ‰§è¡Œé¡¹ç›®åˆ›å»ºæˆ–åˆ‡æ¢ç›®å½•

**æ ¸å¿ƒä»£ç **:
```typescript
// é¡¹ç›®çŠ¶æ€æ£€æŸ¥
const hasPackageJson = fs.existsSync('./package.json');
const hasSrcDir = fs.existsSync('./src');
const hasComponentsDir = fs.existsSync('./src/components');
const isValidZionProject = hasPackageJson && hasSrcDir && hasComponentsDir;

if (isValidZionProject) {
  const userChoice = await askUser('è¯·é€‰æ‹©ï¼š1.å½“å‰é¡¹ç›®åˆ›å»ºç»„ä»¶ 2.æ–°å»ºé¡¹ç›®');
  if (userChoice === '2') {
    const projectName = `${componentName.toLowerCase()}-component`;
    await execCommand(`npx functorz create ${projectName}`);
    process.chdir(`./${projectName}`);
  }
} else {
  // ç›´æ¥åˆ›å»ºæ–°é¡¹ç›®
  const projectName = `${componentName.toLowerCase()}-component`;
  await execCommand(`npx functorz create ${projectName}`);
  process.chdir(`./${projectName}`);
}
```

### Step 3: ä¾èµ–å®‰è£…æ£€æŸ¥æµç¨‹

**ç›®æ ‡**: å®‰è£…é¡¹ç›®ä¾èµ–å¹¶éªŒè¯ç¯å¢ƒ

**å…³é”®åŠ¨ä½œ**:
- ç¡®è®¤åœ¨Zioné¡¹ç›®ç›®å½•å†…
- æ£€æŸ¥package-lock.json
- æ¡ä»¶æ€§æ‰§è¡Œnpm install

**æ ¸å¿ƒä»£ç **:
```typescript
// éªŒè¯é¡¹ç›®ç¯å¢ƒ
if (!fs.existsSync('./package.json')) {
  throw new Error('å½“å‰ç›®å½•ä¸æ˜¯æœ‰æ•ˆçš„Zioné¡¹ç›®ç›®å½•');
}

// æ¡ä»¶æ€§å®‰è£…ä¾èµ–
const hasLockFile = fs.existsSync('package-lock.json');
if (!hasLockFile) {
  await execCommand('npm install');
}
```

### Step 4: é€šè¿‡ Zion MCP è·å–é¡¹ç›®é…ç½®æµç¨‹

**ç›®æ ‡**: åŸºäºå¼€å‘è®¡åˆ’åˆ¤æ–­æ˜¯å¦æ‰§è¡Œæ­¤æ­¥éª¤ï¼Œè‹¥æ‰§è¡Œåˆ™è·å– token å’Œé¡¹ç›®schemaï¼Œå¹¶ä¿å­˜åœ¨ zion é¡¹ä¸­

**å…³é”®åŠ¨ä½œ**:
- æ£€æŸ¥.zion/schema.jsonæ˜¯å¦å­˜åœ¨
- å¤„ç†è®¤è¯token
- è·å–é¡¹ç›®åˆ—è¡¨å’Œschema
- å­˜å‚¨é…ç½®ä¿¡æ¯

**æ ¸å¿ƒä»£ç **:
```typescript
const schemaPath = path.join(projectPath, '.zion', 'schema.json');
const credentialsPath = path.join(projectPath, '.zion', 'zion_credentials.json');

// è·å–é¡¹ç›®åˆ—è¡¨å’Œschema
const projects = await mcp_zion_get_projects({ token: authToken });
const schema = await mcp_zion_get_schema({ 
  token: authToken, 
  projectExId: selectedProjectId 
});
```

### Step 5: éœ€æ±‚è§£æç¡®è®¤æµç¨‹

**ç›®æ ‡**: æ˜ç¡®ç»„ä»¶å¼€å‘ç›®æ ‡

**å…³é”®åŠ¨ä½œ**:
- è§£æç”¨æˆ·éœ€æ±‚
- ç¡®å®šç»„ä»¶åç§°ã€åŠŸèƒ½ã€propsç»“æ„
- éªŒè¯éœ€æ±‚ä¸schemaåŒ¹é…æ€§


## ğŸ›¡ï¸ å·¥ä½œç›®å½•ç®¡ç†

### æ ¸å¿ƒåŸåˆ™
- **æ¯æ¬¡æ–‡ä»¶æ“ä½œå‰éªŒè¯ç›®å½•**
- **ä½¿ç”¨ç»å¯¹è·¯å¾„é¿å…ç›¸å¯¹è·¯å¾„é—®é¢˜**
- **æ˜¾ç¤ºå½“å‰çŠ¶æ€è®©ç”¨æˆ·ç¡®è®¤**

### éªŒè¯æ­¥éª¤
```bash
# åœ¨æ¯æ¬¡æ–‡ä»¶æ“ä½œå‰æ‰§è¡Œ
pwd && ls -la package.json src/
```

### æ–‡ä»¶æ“ä½œè§„èŒƒ
- ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š`/å®Œæ•´è·¯å¾„/src/components/ç»„ä»¶å/æ–‡ä»¶å`
- é¿å…ç›¸å¯¹è·¯å¾„ï¼š`./src/components/ç»„ä»¶å/æ–‡ä»¶å`


### Step 6: æ–‡ä»¶ç›®å½•ç”Ÿæˆæµç¨‹

**ç›®æ ‡**: åœ¨Zioné¡¹ç›®ç›®å½•å†…ç”Ÿæˆæ ‡å‡†åŒ–ç»„ä»¶ç›®å½•ç»“æ„

**å…³é”®åŠ¨ä½œ**:
- åœ¨[Zioné¡¹ç›®ç›®å½•]/src/components/[ç»„ä»¶å]/ä¸‹åˆ›å»ºç›®å½•
- ç”Ÿæˆä¸»æ–‡ä»¶ã€æ ·å¼ã€å¯¼å‡ºæ–‡ä»¶
- åˆ›å»ºGraphQLç›®å½•

**æ ¸å¿ƒä»£ç **:
```typescript
// ç¡®ä¿åœ¨ Zion é¡¹ç›®ç›®å½•å†…
process.chdir(projectPath);

// åˆ›å»ºç»„ä»¶ç›®å½•ç»“æ„
const componentDir = path.join(projectPath, 'src', 'components', componentName);
fs.mkdirSync(componentDir, { recursive: true });

// åˆ›å»ºä¸»è¦æ–‡ä»¶
const componentFile = path.join(componentDir, `${componentName}.tsx`);
const styleFile = path.join(componentDir, 'style.module.scss');
const indexFile = path.join(componentDir, 'index.ts');
const graphqlDir = path.join(componentDir, 'graphql');

fs.mkdirSync(graphqlDir, { recursive: true });
```

### Step 7: ä»£ç å¼€å‘æµç¨‹

**å”¯ä¸€å·¥ä½œç›®å½•**ï¼š[Zioné¡¹ç›®ç›®å½•]/src/components/[ç»„ä»¶å]/
**ç›®æ ‡**: åœ¨å·¥ä½œç›®å½•å†…å®Œæˆç»„ä»¶æ ¸å¿ƒé€»è¾‘å¼€å‘

**å…³é”®åŠ¨ä½œ**:
- ç¡®ä¿åœ¨ zion é¡¹ç›®ç›®å½•å†…æ‰§è¡Œ
- å®ç°ä¸‰æ®µå¼interfaceï¼ˆPropDataã€StateDataã€Eventã€Propsï¼‰
- éµå¾ªå¯¼å‡ºè§„èŒƒï¼Œç¦æ­¢export default
- ä½¿ç”¨useAppContextè·å–ctx
- åª’ä½“ä¸Šä¼ å­—æ®µå‘½å*_id
- Reactçº¦æŸï¼šæ˜¾å¼å¯¼å…¥React

**æ ¸å¿ƒè§„èŒƒ**:
```typescript
// ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•
process.chdir(projectPath);

// ä¸‰æ®µå¼ç±»å‹å¯¼å‡º
export interface UserInfoPropData { name: string; age: number; }
export interface UserInfoStateData { loading: State<boolean>; }
export interface UserInfoEvent { onConfirm?: EventHandler; }
export interface UserInfoProps {
  propData: UserInfoPropData;
  propState: UserInfoStateData;
  event: UserInfoEvent;
}

// ç»„ä»¶å®ç°
import React from 'react';
import { useAppContext } from 'zvm-code-context';

export const UserInfo = (props: UserInfoProps) => {
  const ctx = useAppContext();
  // ç»„ä»¶é€»è¾‘
};
```

### Step 8: ä»£ç ç»„ä»¶é›†æˆæµç¨‹

**ç›®æ ‡**: å°†ç»„ä»¶æŒ‰è§„èŒƒå¯¼å‡ºåˆ°ä¸»å…¥å£

**å…³é”®åŠ¨ä½œ**:
- ä¸»å…¥å£ä»¥å¯¹è±¡æ–¹å¼å¯¼å‡ºç»„ä»¶
- åœ¨src/App.tsxä¸­å¼•å…¥å¹¶æ¸²æŸ“ç»„ä»¶

**æ ¸å¿ƒä»£ç **:
```typescript
// src/components/index.ts
import { UserInfo } from './UserInfo';
export default { UserInfo };
```

### Step 9: ä»£ç åˆè§„æ ¡éªŒä¸è‡ªæ£€æµç¨‹

**ç›®æ ‡**: æ£€æµ‹ä»£ç è§„èŒƒåˆè§„æ€§

**å…³é”®åŠ¨ä½œ**:
- ä»£ç é£æ ¼å’Œè¯­æ³•æ£€æŸ¥
- ç±»å‹æ£€æŸ¥
- è‡ªåŠ¨ä¿®æ­£é—®é¢˜

**æ ¸å¿ƒå‘½ä»¤**:
```bash
npm run lint
```

### Step 10: ä»£ç ç»„ä»¶æ‰“åŒ…æµç¨‹

**ç›®æ ‡**: æœ¬åœ°æ„å»ºç»„ä»¶

**æ ¸å¿ƒå‘½ä»¤**:
```bash
npm run build --verbose
```

### Step 11: æœ¬åœ°é¢„è§ˆæµ‹è¯•

**ç›®æ ‡**: åœ¨ zioné¡¹ç›®ç›®å½•å†…æ‰§è¡Œé¢„è§ˆæ ¸å¿ƒå‘½ä»¤ï¼Œæ¯æ¬¡æ‰§è¡Œç¡®ä¿æ‰§è¡ŒæˆåŠŸ

**å…³é”®åŠ¨ä½œ**:
- éªŒè¯package.jsonåŒ…å«previewè„šæœ¬
- æ‰§è¡Œé¢„è§ˆæ ¸å¿ƒå‘½ä»¤ï¼ˆç«¯å£6326-6335ï¼‰
- ç”¨æˆ·æŠ¥é”™ä¿®å¤æµç¨‹

**æ ¸å¿ƒå‘½ä»¤**:
```bash
npm run build --verbose
npm run preview
```

**ä¿®å¤æµç¨‹**: é”™è¯¯ â†’ ä¿®å¤ä»£ç  â†’ é‡æ–°æ„å»º â†’ æ‰§è¡Œé¢„è§ˆæŒ‡ä»¤ â†’ ç­‰å¾…ç”¨æˆ·éªŒè¯

### Step 12: ä»£ç ç»„ä»¶é¦–æ¬¡å‘å¸ƒ

**ç›®æ ‡**: ç”¨æˆ·ç¡®è®¤åæ‰§è¡Œæµ‹è¯•å‘å¸ƒ

**å‰ç½®æ¡ä»¶**: å®ŒæˆStep 11ä¸”ç”¨æˆ·ç¡®è®¤æ— é—®é¢˜

**æ ¸å¿ƒå‘½ä»¤**:
```bash
# æ¡ä»¶æ€§é‡æ–°æ‰“åŒ…
npm run build
# æµ‹è¯•å‘å¸ƒ
npx functorz publish --verbose
```

### Step 13: æ–‡æ¡£è¡¥å…¨æµç¨‹

**ç›®æ ‡**: è‡ªåŠ¨ç”ŸæˆREADME.mdä¿å­˜åœ¨ /zion é¡¹ç›®/src/components/ç»„ä»¶å/æ–‡ä»¶ä¸­ï¼Œè‹¥å·²å­˜åœ¨åˆ™é€’å¢æ–°çš„å†…å®¹

**åŒ…å«å†…å®¹**:
- ç»„ä»¶ç®€ä»‹ã€é›†æˆæ­¥éª¤
- å±æ€§ä¸äº‹ä»¶è¯´æ˜ã€ç”¨æ³•ç¤ºä¾‹
- å¹³å°é…ç½®ã€GraphQLè¯´æ˜
- åª’ä½“ä¸Šä¼ è¯´æ˜ã€æ ·å¼è‡ªå®šä¹‰
- å¸¸è§é—®é¢˜ã€ç‰ˆæœ¬ç»´æŠ¤

### Step 14: å¹³å°é¢„è§ˆè°ƒè¯•æµç¨‹

**ç›®æ ‡**: æç¤ºç”¨æˆ·åœ¨ zion ç¼–è¾‘å™¨å†…è°ƒè¯•ä»£ç ç»„ä»¶ï¼Œå¹¶æ‰§è¡Œé¢„è§ˆå‘½ä»¤ï¼Œé—®é¢˜ä¿®å¤åä¹Ÿéœ€è¦ç¡®ä¿é¢„è§ˆå‘½ä»¤æ‰§è¡ŒæˆåŠŸ

**å…³é”®åŠ¨ä½œ**:
- æç¤ºç”¨æˆ·åœ¨Zionç¼–è¾‘å™¨ä¸­æ·»åŠ ç»„ä»¶
- æ‰§è¡Œæ‰“åŒ…å’Œé¢„è§ˆæ ¸å¿ƒå‘½ä»¤ï¼ˆç«¯å£6326-6335ï¼‰
- ç”¨æˆ·æŠ¥é”™ä¿®å¤æµç¨‹ï¼ˆç”¨æˆ·æœªç¡®è®¤ç»å¯¹ç¦æ­¢è‡ªåŠ¨å‘å¸ƒï¼‰

**ä¿®å¤æµç¨‹**: åˆ†æé”™è¯¯ â†’ ä¿®å¤ä»£ç  â†’ é‡æ–°æ„å»º â†’ æ‰§è¡Œé¢„è§ˆæŒ‡ä»¤ â†’ ç­‰å¾…ç”¨æˆ·éªŒè¯
**æ ¸å¿ƒå‘½ä»¤**:
```bash
npm run build --verbose
npm run preview


### Step 15: å‘å¸ƒä¸Šçº¿æµç¨‹

**ç›®æ ‡**: æ­£å¼å‘å¸ƒç»„ä»¶

**å‰ç½®æ¡ä»¶**: Step 14ç”¨æˆ·ç¡®è®¤æ— é—®é¢˜

**æ ¸å¿ƒå‘½ä»¤**:
```bash
# å‡çº§ç‰ˆæœ¬å·ï¼ˆå¦‚æœ‰å†²çªï¼‰
npm version patch
# é‡æ–°æ„å»º
npm run build
# æ­£å¼å‘å¸ƒ
npx functorz publish --verbose
```

## ğŸ”„ å¼‚å¸¸å¤„ç†æœºåˆ¶

### å¸¸è§å¼‚å¸¸ç±»å‹åŠå¤„ç†

1. **ç¯å¢ƒå¼‚å¸¸**: è‡ªåŠ¨é‡æ–°ç™»å½•ï¼Œç½‘ç»œé‡è¯•3æ¬¡
2. **é¡¹ç›®å¼‚å¸¸**: è‡ªåŠ¨é‡å‘½åï¼Œæœ€å¤šå°è¯•5æ¬¡
3. **ä»£ç å¼‚å¸¸**: è‡ªåŠ¨ä¿®å¤è¯­æ³•å’Œç±»å‹é”™è¯¯
4. **å‘å¸ƒå¼‚å¸¸**: è‡ªåŠ¨å‡çº§ç‰ˆæœ¬å·é‡è¯•

### ä¸Šä¸‹æ–‡æ€»ç»“æœºåˆ¶

æ¯æ­¥æ‰§è¡Œåè®°å½•çŠ¶æ€ä¿¡æ¯ï¼š
```typescript
const recordStep = (stepNumber: number, stepName: string, status: string) => {
  const stepRecord = {
    stepNumber,
    stepName,
    status,
    timestamp: new Date().toISOString()
  };
  fs.appendFileSync('æ­¥éª¤æ€»ç»“.md', generateStepSummary(stepRecord));
};
```

## âš ï¸ å…³é”®çº¦æŸæé†’

### é¢„è§ˆæŒ‡ä»¤è§„èŒƒ
- **ç¦æ­¢**: ä½¿ç”¨`npx vite preview`æˆ–`vite preview`é¢„è§ˆæŒ‡ä»¤
- **å¿…é¡»**: åœ¨é¡¹ç›®ç›®å½•å†…ä½¿ç”¨`npm run preview`
- **ç«¯å£**: é™å®šåœ¨6326-6335èŒƒå›´
- **å‰ç½®**: å¿…é¡»å…ˆæ‰§è¡Œ`npm run build`

### å¸¸è§é—®é¢˜å¤„ç†
1. **Reactæœªå®šä¹‰**: ç¡®ä¿æ¯ä¸ª.tsxæ–‡ä»¶å¯¼å…¥Reactï¼Œæˆ–æ£€æŸ¥vite.config.tsä¸­çš„externalé…ç½®æ˜¯å¦æ­£ç¡®
2. **previewè„šæœ¬ç¼ºå¤±**: ç¡®ä¿åœ¨æ­£ç¡®é¡¹ç›®ç›®å½•æ‰§è¡Œ
3. **ç‰ˆæœ¬å†²çª**: è‡ªåŠ¨æ‰§è¡Œnpm version patch
4. **GraphQLå­—æ®µé”™è¯¯**: ä¸¥æ ¼å¯¹é½schemaå­—æ®µå

### Viteé…ç½®è§„èŒƒ
**æ„å»ºé…ç½®è¦æ±‚**:
- **previewæ¨¡å¼å…¼å®¹**: ç§»é™¤`rollupOptions.external`é…ç½®ï¼Œç¡®ä¿Reactæ­£å¸¸æ‰“åŒ…
- **æ¨èé…ç½®**:
```typescript
build: {
  rollupOptions: {
    // ç§»é™¤externalé…ç½®ï¼Œè®©Reactæ­£å¸¸æ‰“åŒ…
    plugins: [],
  },
}
```
**åŸå› **: previewæ¨¡å¼ä¸‹å¤–éƒ¨ä¾èµ–æ— æ³•æ­£ç¡®æä¾›ï¼Œå¯¼è‡´Reactæœªå®šä¹‰é”™è¯¯

---

**æ³¨æ„**: æœ¬æ–‡ä»¶ä¸“æ³¨å¼€å‘æ‰§è¡Œæµç¨‹ï¼Œä»£ç è§„èŒƒå’ŒGraphQLè¯¦æƒ…è¯·å‚è€ƒå¯¹åº”ä¸“ä¸šæ–‡ä»¶ã€‚